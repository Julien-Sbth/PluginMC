<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <meta charset="UTF-8">
    <script src="https://kit.fontawesome.com/c3e7b9f4c8.js" crossorigin="anonymous"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="/templates/css/Menu/index.css">
    <title>Home</title>
</head>
<body>
<div id="logo-container">
    <h1 id="animated-logo">PluginMC</h1>
</div>

<header>
    <div class="site-info">
        <a href="/" id="site_name">PluginMC</a>
        <span class="button-space"></span>
        <a href="/about" class="expander" id="info-button" aria-expanded="false"><span>About</span></a>
        <span class="button-space"></span>
        <a href="/shop" class="expander" id="shop" aria-expanded="false"><span>Shop</span></a>
        <span class="spacer"></span>
    </div>
    <div class="right-buttons">
        {{ if .IsLoggedIn }}
        <a href="/settings" id="gearButton" class="expander"><span>Settings</span>
            <i class="fas fa-cog"></i>
        </a>
        <a href="/logout" class="expander"><span>DÃ©connexion</span></a>
        {{ else }}
        <a href="/register" class="expander" id="button1"><span>Register</span></a>
        <span class="button-space"></span>
        <a href="/login" class="expander" id="button2"><span>Login</span></a>
        <span class="button-space"></span>
        {{ end }}

        {{ if .IsAdmin }}
        <a href="/panel" class="expander"><span>Panneau de Configuration</span></a>
        {{ end }}
    </div>
</header>
<main class="grid">
    <form action="/api/player/search" method="GET" class="lookup-player">
        <label for="username">
            <h1>Show Player Stats</h1>
        </label>
        <input type="text" id="username" name="username" required placeholder="Enter a username">
        <button id="log-in" class="minecraft-input" type="submit">Show me</button>
    </form>
    {{ if .IsLoggedIn }}
    <h1>Bienvenue {{ .Username }} !</h1>
    {{ end }}
</main>
<script>
    document.addEventListener("DOMContentLoaded", function() {
        const logo = document.getElementById('animated-logo');
        const logoContainer = document.getElementById('logo-container');
        const target = document.getElementById('site_name');

        setTimeout(function() {
            // Calculate the target position
            const logoRect = logo.getBoundingClientRect();
            const targetRect = target.getBoundingClientRect();

            const targetX = targetRect.left - logoRect.left + (targetRect.width - logoRect.width) / 2;
            const targetY = targetRect.top - logoRect.top + (targetRect.height - logoRect.height) / 2;

            // Set CSS variables for the target position
            logo.style.setProperty('--target-x', `${targetX}px`);
            logo.style.setProperty('--target-y', `${targetY}px`);

            // Start the move animation
            logo.style.animation = 'moveToHeader 1s forwards';
        }, 3000); // Delay matches the initial animation duration

        // Remove the logo container and show the main content after the animation is complete
        logo.addEventListener('animationend', function() {
            if (logo.style.animation.includes('moveToHeader')) {
                logoContainer.style.opacity = '0';
                setTimeout(function() {
                    logoContainer.remove();
                    document.body.classList.remove('hidden'); // Show the main content
                }, 1000); // Delay matches the fade-out duration
            }
        });
    });

    // Hide the main content initially
    document.body.classList.add('hidden');
</script>

</body>
</html>
